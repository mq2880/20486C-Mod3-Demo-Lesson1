# Module 3: Configuring Middleware and Services in ASP.NET Core

# Lesson 1: Configuring Middleware

### Demonstration: How to Create Custom Middleware

A単adimos el metodo **configure** :



```cs
    public void Configure(IApplicationBuilder app)
    {
        app.Run(async (context) =>
        {
            await context.Response.WriteAsync("This text was generated by the app.Run middleware.");
        });
    }
```

Comprobamos la salida:

![](./img/Captura1.jpg)

A単adimos el siguiente  codigo delante del anterior

```cs
    app.Use(async (context, next) =>
    {
        await context.Response.WriteAsync("This text was generated by the app.Use middleware. Request path is: " + context.Request.Path.Value + "<br />");
    });
```



vemos que solo se ejecuta este



![](./img/Captura2.jpg)

Incluimos antes del cierre de llaves del codigo anterior el siguiente codigo:

```cs
    await next.Invoke();
```

Comprobamos que se ejecutan los dos



![](./img/Captura3.jpg)

### Demonstration: How to Work with Static Files



- Creamos un nuevo proyecto

- A単adimos dos ficheros en la carpeta wwwroot

- En el middleware a単adimos el metodo configure

  

```cs
    public void Configure(IApplicationBuilder app)
    {
        app.Run(async (context) =>
        {
            await context.Response.WriteAsync("This text was generated by the app.Run middleware.");
        });
    }
```



EJecutamos:



![](./img/Captura4.jpg)

Colocamos en el metodo configure el siguiente codigo delante del anterior:

```cs
    app.UseStaticFiles();
```



Ejecutamos:



![](./img/Captura5.jpg)